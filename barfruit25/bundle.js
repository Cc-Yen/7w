(()=>{function e(e){const t=encodeURIComponent(e),n=[];for(var a=0;a<t.length;a++){const e=t.charAt(a);if("%"===e){const e=t.charAt(a+1)+t.charAt(a+2),i=parseInt(e,16);n.push(i),a+=2}else n.push(e.charCodeAt(0))}return n}function t(e){for(var t="",n=0;n<e.length;n++)t+="%"+e[n].toString(16);return decodeURIComponent(t)}function n(){}function a(e){return new RegExp("({)?\\{"+e+"\\}(?!})","gm")}function i(e){return null==e?"":e.replace(a("\\d+"),"")}function e(e){for(var t=encodeURIComponent(e),n=[],a=0;a<t.length;a++){var i=t.charAt(a);if("%"===i){var o=t.charAt(a+1)+t.charAt(a+2),s=parseInt(o,16);n.push(s),a+=2}else n.push(i.charCodeAt(0))}return n}function t(e){for(var t="",n=0;n<e.length;n++)t+="%"+e[n].toString(16);return decodeURIComponent(t)}n.Load_MultiAtlas=function(e){},n.Set_七戲類別_單字串陣列=function(e){for(var t=e.split(/\n?\r?\n?\r?;/),n=t[0].split(","),a={},i=1;i<t.length;i++)a[n[i]]=t[i].replace("\r","").split("\n");return a},n.Set_七戲類別_毎筆陣列結構=function(e){for(var t=e.split(/\n?\r?\n?\r?;/),n=t[0].split(","),a={},i=1;i<t.length;i++)a[n[i]]=this.Set_毎筆2D型格式資料(t[i]);return a},n.Set_七戲類別資料結構=function(e){for(var t=e.split(/\n?\r?\n?\r?;/),n=t[0].split(","),a={},i=1;i<t.length;i++)a[n[i]]=this.Set_欄首2D型格式資料(t[i]);return a},n.Set_欄首2D型格式資料=function(e,t,n){t=null==t?",":t,n=null==n?"\n":n;var a=e.replace("\r","").split(n),i=[];const o=a[0].split(",").length;for(var s=0;s<o;s++)i[s]=[];for(var r=0;r<a.length;r++){var l=a[r].split(",");for(s=0;s<l.length;s++)i[s][r]=l[s]}return i},n.Set_毎筆2D型格式資料=function(e,t,n){t=null==t?",":t,n=null==n?"\n":n;var a=e.replace("\r","").split(n);ret=[[]];for(var i=0;i<a.length;i++){var o=a[i].split(",");ret[i]=[];for(var s=0;s<o.length;s++)ret[i][s]=o[s]}return ret},n.sSplit=function(e,t){return e.split(t)},n.Set_數字前置補零=function(e,t){for(var n=t-e.toString(10).length,a="",i=0;i<n;i++)a="0"+a;return a},n.Set_數字千位標點符號=function(e){for(var t=e.toString(),n="",a=1,i=t.length-1;i>-1;i--)n=(a%3==0&&t.length>a?",":"")+t[i]+n,a++;return n},n.Set_文字機率箱攪拌=function(e){for(var t=0;t<e.length;t++){var n=f.between(0,e.length-1),a=e[n];switch(delete e[n],t%3){case 0:e.splice(0,0,a);break;case 1:e.push(a);break;case 2:e.splice(f.between(0,e.length-1),0,a-1)}}},n.Set_數字機率箱攪拌=function(e){for(var t=0;t<e.length;t++){var n=f.between(0,e.length-1),a=e[n];switch(delete e[n],t%3){case 0:e.splice(0,0,a);break;case 1:e.push(a);break;case 2:e.splice(f.between(0,e.length-1),0,a-1)}}},n._抽取機率箱=function(e,t){if(t=null==t?0:t,0==e.length)return-1;var n=f.between(_啟始碼,e.length-1),a=e[n];return delete e[n],a},n._抽取機率箱=function(e,t){if(啟始碼=null==啟始碼?0:啟始碼,0==e.length)return null;var n=f.between(t,e.length-1),a=e[n];return delete e[n],a},n.IP_FromINT=function(e){return(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)},n.Get_現在時刻=function(e){e=void 0===e;var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+(e?"."+t.getMilliseconds()%1e3:"")},n.Get_TimeFrom整數=function(e,t){var n=new Date(1970,0,1,8,0,0);return n.setSeconds(e),n.toISOString().replace("T"," ").replace("Z","").split(".")[0]+(void 0===t?"":"."+t)},n.Get_整數FromTime=function(e){return new Date(e).getTime()},n.Clamp=function(e,t,n){return Math.min(Math.max(e,n),t)},n.Get_詞嵌入文=function(){var e=arguments[0];if(null==e)return"";for(var t=0;t<arguments[1].length;t++){var n=a(t);e=e.replace(n,null==arguments[1][t]?"":arguments[1][t])}return i(e)},String.format=function(){var e=arguments[0];if(null==e)return"";for(var t=0;t<arguments.length-1;t++){var n=a(t);e=e.replace(n,null==arguments[t+1]?"":arguments[t+1])}return i(e)},String.prototype.format=function(){for(var e=this.toString(),t=0;t<arguments.length;t++){var n=a(t);arguments[t]=String(arguments[t]).replace(/\$/gm,"♒☯◈∭"),e=(e=e.replace(n,null==arguments[t]?"":arguments[t])).replace(/♒☯◈∭/gm,"$")}return i(e)};var o,s=void 0===document.pp?decodeURIComponent(window.location.search).substring(1).split("&"):document.pp;console.log(s);var r,l,h=Object.freeze({AuthRegGameServer:0,authorize:1,register:2,login:3,msg:4,list:5,trade:6,mail:7,server_queue:8,game:9,game_menu:10,dCmd:11,可忽略:16}),c=(Object.freeze({訪客:0,七戲:1,旁門:2}),Object.freeze({authorize:0,授權GameLobby:0,授權AppGame:1,register:1,login:2,message:3,list:4,trans:5,mail:6,server_queue:7,ui_menu:8,logic:9,eCmds_dCmd:10,eCmd_可忽略:16})),d=Object.freeze({GameLobby:0,Main:1,TopBoard:2,Options:3,Store:4,Help:5,GamePicking:6,Game:7}),u=Object.freeze({bl:0,c1:1,sa:2,sr:3,s1:4,s2:5,s3:6,sm:7,bt:8,i1:9,u1:10,i2:11,u2:12,i4:13,u4:14,i8:15,u8:16,db:17,fl:18,de:19,i1n:20,u1n:21,i2n:22,u2n:23,i4n:24,u4n:25,i8n:26,u8n:27,dbn:28,fln:29,den:30,ato:31,u1c:32,pu:33,pi:34,ps:35,pf:36,count:37});function p(e,t,n,a,i,s,h){var c=[];c.push(e,t);for(var d=0;d<n.length;d++)c.push(2+a[d].length),c.push(n[d]),c=c.concat(a[d]);void 0!==s&&(s.disableInteractive(),(l=s.getChildByID("lstate")).innerHTML="等待伺服器回應…",r=setInterval(g,100,[h,100])),o.send(new Uint8Array(c)),c=[]}function g(e){e[0]=e[0]-e[1],"等待伺服器回應…"!=l.innerHTML?clearInterval(r):0==e[0]&&(clearInterval(r),l.innerHTML="伺服器沒有回應，請稍後再試…")}var f,m={},v={},_={},b="https://raw.githubusercontent.com/Cc-Yen/7w/main//barfruit25/";function y(e,t,n){n=void 0===n?-1:n;var a=Math.round(Number.MAX_SAFE_INTEGER*Math.random());switch(n){case-1:return a%(t-e)+e;case 0:return a%(t-e+1)+e;case 1:return a%(t-e)+e+1}}var w,S,x,E,B,M,O,T,k,I,P,A,D,C,j,L,G=40,N=[16711680,16737792,16776960,65280,255,1539248,10027212,4509429,7402239,16751052],R=56,U=[],F=[],Y=[],z=null,H=null,J=null,W=[],X=Object.freeze({初始化:0,房桌訊:1,進入遊戲:2,押注開獎:3,即時訊息:4,放棄投降:5,每手計時:6}),V=[],K={gID:"barfruit25",gWS:s[5]},q=(Number.MAX_SAFE_INTEGER,Object.freeze([[1,4,7,10,13],[2,5,8,11,14],[0,3,6,9,12],[2,4,6,10,14],[0,4,8,10,12],[1,5,8,11,13],[1,3,6,9,13],[2,5,7,11,14],[0,3,7,9,12],[2,3,7,9,14],[0,5,7,11,12],[2,4,7,10,14],[0,4,7,10,12],[2,4,8,10,14],[0,4,6,10,12],[1,4,8,10,13],[1,4,6,10,13],[2,5,6,11,14],[0,3,8,9,12],[2,3,6,9,14],[0,5,8,11,12],[2,3,8,9,14],[0,5,6,11,12],[1,5,6,11,13],[1,3,8,9,13]])),$=(Object.freeze([[[0,3,6,9,12],[0,3,7,9,12],[0,3,8,9,12],[0,4,8,10,12],[0,4,7,10,12],[0,4,6,10,12],[0,5,7,11,12],[0,5,8,11,12],[0,5,6,11,12]],[[1,3,6,9,13],[1,3,8,9,13],[1,4,7,10,13],[1,4,8,10,13],[1,4,6,10,13],[1,5,8,11,13],[1,5,6,11,13]],[[2,5,8,11,14],[2,4,6,10,14],[2,5,7,11,14],[2,3,7,9,14],[2,4,7,10,14],[2,4,8,10,14],[2,5,6,11,14],[2,3,6,9,14],[2,3,8,9,14]]]),Object.freeze({無:0,JP獎:1,收集獎:2,總賠率:3,連線獎:4,巨多線:5})),Z=Object.freeze({無:$.無,JP獎:$.JP獎,收集獎:$.收集獎,收集獎_集滿三個燈_一般:10*$.收集獎+1,收集獎_集滿三個燈_大贏:10*$.收集獎+2,bonus:$.總賠率,bonus_big:10*$.總賠率+1,bonus_itemGain:10*$.總賠率+2,win:$.連線獎,Mega獎:$.巨多線,count:12}),Q=[[0,0,2,20,200],[0,0,3,30,300],[0,0,5,50,500],[0,0,8,80,800],[0,0,12,120,1200],[0,0,20,200,2e3],[0,0,30,300,3e3],[0,0,60,600,6e3]],ee={ref:!1},te=[[]],ne=Object.freeze([[[4,3,1],[6666,777],[y(0,8),3],[9,y(3,5,0)],[0,0,0,7,y(3,5,0)]]]),ae=Object.freeze({0:[],1:[function(e){console.log(" 弭平之ping(騙)到了 !",e)},function(e){console.log(" 完成身份確認 ! !",e),1===e[0][0]?console.log(" 正式 進行遊戲 ! !",e):console.log(" 無法授權確認 以訪客身進行遊戲。",e)}],2:[function(e){for(var t=0;t<e.length;++t)console.log(t,"> ：",e[t])},function(e){for(var t=0;t<e.length;++t)console.log(t,"> ：",e[t])}],3:[function(e){for(var t=0;t<e.length;++t)console.log(t,"> ：",e[t])},function(e){}],10:{7:function(e){console.log("遊戲伺服器開獎回應",e),w.Trig_Slot(e)}}});function ie(e,t){for(var n=e[t],a=[],i=0;i<e.length;i++){for(var o=e[i],s=!0,r=0;r<5;r++)if(o[r]===n[r]){s=!1;break}s&&a.push(i)}return a}var oe=function(e,t,n,a){"use strict";Phaser.Sprite.call(this,e.game,t.x,t.y,"choices"),this.anchor.setTo(.5,.5),this.width=84,this.height=R,this.gameState=e,this.type=a,n&&this.gameState.groups[n].add(this),this.frame=a,this.inputEnable=!0,this.events.onInputOver.add(this.Light,this),this.events.onInputOut.add(this.unLight,this),this.ID=a,this.fliping=!1,this.retain=!1,this.yellowMask=dt.add.graphics(t.x,t.y),this.yellowMask.anchor.setTo(.5,.5),this.yellowMask.beginFill(16777215),this.yellowMask.drawRect(-42,-28,84,R),this.yellowMask.endFill(),this.yellowMask.alpha=0,this.lightTween=dt.add.tween(this)};(oe.prototype=Object.create(Phaser.Sprite.prototype)).constructor=oe,oe.prototype.Light=function(e){this.yellowMask.tint=e,this.yellowMask.position=this.position,this.lightTween=dt.add.tween(this.yellowMask).to({alpha:.28},280,Phaser.Easing.Linear.None,!0,0,-1,!0)},oe.prototype.unLight=function(){this.lightTween.stop(!0),dt.add.tween(this.yellowMask).to({alpha:0},400,Phaser.Easing.Linear.None,!0)},oe.prototype.runFrameAnim=function(){this.frameAnim.alpha=1,this.frameAnim.animations.play("run",8,!0),dt.time.events.add(8*Phaser.Timer.SECOND,(function(){this.frameAnim.animations.stop("run"),this.frameAnim.alpha=0}),this)};var se=function(e,t,n,a,i){"use strict";Phaser.Sprite.call(this,e.game,t.x,t.y,n),this.anchor.setTo(.5,.5),this.gameState=e,this.properties=i,a&&this.gameState.groups[a].add(this)};(se.prototype=Object.create(Phaser.Sprite.prototype)).constructor=se;var re,le,he=function(e,t,n,a,i){"use strict";Phaser.Sprite.call(this,e.game,t.x,t.y,n),this.anchor.setTo(.5,.5),this.gameState=e,this.properties=i,a&&this.gameState.groups[a].add(this),this.adjustPos(),this.animations.add("swim"),dt.physics.enable(this,Phaser.Physics.ARCADE),this.startSwim=!1,this.speed=0,this.count=0};(he.prototype=Object.create(Phaser.Sprite.prototype)).constructor=he,he.prototype.adjustPos=function(){"left"==this.properties.initSide?(this.reset(-this.width-100,dt.height/2),this.angle=0):"right"==this.properties.initSide?(this.reset(dt.width+this.width+100,dt.height/2),this.angle=-180):"up"==this.properties.initSide?(this.reset(dt.width/2,dt.height+this.height+100),this.angle=-90):"down"==this.properties.initSide&&(this.reset(dt.width/2,-this.height-100),this.angle=90)},he.prototype.swim=function(){this.animations.play("swim",8,!0),this.startSwim=!0,dt.time.events.loop(Phaser.Timer.SECOND,this.updateDirOrSpeed,this)},he.prototype.updateDirOrSpeed=function(){this.count++,this.count%3==0&&(this.speed=dt.rnd.pick([60,80,100,120])),this.count%4==0&&(this.body.angularVelocity=dt.rnd.pick([20,-20,0,10,-10]))},he.prototype.outBack=function(){this.x>dt.width+this.width+100?this.x=-this.width-100:this.x<-this.width-100&&(this.x=dt.width+this.width+100),this.y>dt.height+this.height+100?this.y=-this.height-100:this.y<-this.height-100&&(this.y=dt.height+this.height+100)},he.prototype.update=function(){this.startSwim&&this.body.velocity.copyFrom(dt.physics.arcade.velocityFromAngle(this.angle,this.speed)),this.outBack()};var ce,de=[];function ue(){De(),j.frame=0,Oe(j,"debug"===s[0]||O.value>=5),x.value>0?(Pe(x,w.BnBet["num_自動轉數"].減注),Ae()):(dt.sound.stopAll(),re.play())}function pe(){dt.sound.stopAll(),dt.sound.play("msc"+ce,1,!0);var e=0,t=[{x:dt.width/2,y:100},{x:dt.width/2,y:dt.height-100},{x:dt.width-150,y:dt.height/2},{x:150,y:dt.height/2}];switch(ce){case Z.win:console.log("e演繹類型.win"),parseInt(Y[1][1])<8*B.value?(de=[!1],ye(e=168),W.length):(de=[!1,!1,!1],ye(e=168),ge(4900,t),_e(1e3,777,28),fe("水果多\n贏很大",1e3,1e3,2e3,Phaser.Easing.Cubic.InOut));break;case Z.Mega獎:de=[!1,!1,!1],ye(e=77);var n=25*e*4;ge(4900,t),_e(n,2100,28),fe("超級果盤\n巨贏滿滿",n,1e3,3e3,Phaser.Easing.Exponential.InOut);break;case Z.收集獎:console.log("e演繹類型.收集獎"),W=[J],e=490,de=[!1,!0,!1];var a=J.cnt_中獎圖-2,i="彩燈全亮\n滿贏獎金";switch(a){case 1:t=[{x:dt.width/2,y:dt.height/2}];break;case 2:t=[{x:dt.width/3,y:dt.height/2},{x:2*dt.width/3,y:dt.height/2}];break;case 3:t=[{x:dt.width/4,y:dt.height/2},{x:dt.width/2,y:dt.height/2},{x:.75*dt.width,y:dt.height/2}]}ge(4900,t,{x:396,y:488},{x:.2,y:.2}),1===J.cnt_本機彩燈終亮結果?(i="恭喜點亮\n一個彩燈",ye(e,void 0,void 0,!1)):2===J.cnt_本機彩燈終亮結果?(i="恭喜點亮\n二個彩燈",ye(e,void 0,void 0,!1)):ye(e);var o=dt.time.events.add(4900,(function(){if(Te(0===J.cnt_本機彩燈終亮結果?3:J.cnt_本機彩燈終亮結果),fe(i,n,1e3,3e3,Phaser.Easing.Exponential.InOut),0===J.cnt_本機彩燈終亮結果)var e=dt.time.events.add(4900,(function(){Te(0),dt.time.events.remove(e)}));dt.time.events.remove(o)}));break;case Z.bonus:console.log("e演繹類型.bonus"),W=[H],de=[!1,!1,!1],ye(e=168),ge(4900,t),_e(1e3,777,28),fe("恭喜\n金亮",1e3,1e3,2e3,Phaser.Easing.Cubic.InOut);break;case Z.bonus_big:console.log(" e演繹類型.bonus_big");break;case Z.bonus_itemGain:console.log("e演繹類型.bonus_itemGain");break;case Z.JP獎:console.log("e演繹類型.JP獎"),W=[z],de=[!1,!1,!1],ye(e=1680),ge(4900,[{x:dt.width/2,y:dt.height/2}]),_e(1e3,777,28),fe("金恭喜\n金亮喜",1e3,1e3,2e3,Phaser.Easing.Cubic.InOut)}for(var s=[],r=0;r<U.length;r++)for(var l=3;l>0;l--)s.push(U[r].getAt(l));for(r=0;r<W.length;r++){var h=q[W[r].id_獎線];for(l=0;l<h.length;l++){var c=h[l];s[c].frame===W[r].id_獎圖&&s[c].Light(N[W[r].id_獎圖])}}}function ge(e,t,n,a,i){for(var o="anm"+ce,s=[],r=0;r<t.length;r++){var l=dt.add.sprite(t[r].x,t[r].y,o);l.anchor.setTo(.5,.5),l.animations.add(o),l.animations.play(o,8,!0),null!=n&&(dt.add.tween(l).to(n,.1*e,Phaser.Easing.Linear.None,!0),dt.add.tween(l.scale).to(a,.1*e,Phaser.Easing.Linear.None,!0),dt.add.tween(l).to({alpha:0},.1*e,Phaser.Easing.Linear.None,!0)),s.push(l)}dt.time.events.add(e,(function(){for(var e=0;e<s.length;e++)s[e].animations.stop(o),s[e].destroy();de[0]=!0}),this)}function fe(e,t,n,a,i){var o=dt.add.bitmapText(256,168,"中獎標字",e,42);o.anchor.setTo(.5,.5),dt.add.tween(o).from({x:256,y:320,fontSize:28,alpha:0},n,i,!0,t).onComplete.add(me,void 0,void 0,a)}function me(e,t,n){dt.add.tween(e).to({alpha:0},n,Phaser.Easing.Linear.None,!0).onComplete.add(ve)}function ve(e){de[2]=!0,e.destroy()}function _e(e,t,n){var a=0,i=dt.add.emitter(dt.world.centerX,dt.world.centerY,n);i.makeParticles("balls",[0,1,2,3,4,5],200,!0,!0),i.minParticleSpeed.setTo(-210,-210),i.maxParticleSpeed.setTo(210,210),i.gravity=777;var o=dt.time.events.loop(100,(function(){i.forEach((function(e){e.frame=(e.frame+1)%6})),(a+=100)===e&&(i.start(!1,4e3,7),dt.sound.play("sfx金幣流",4)),a>=e+t&&(de[1]=!0,dt.sound.removeByKey("sfx金幣流"),dt.time.events.remove(o),i.destroy(!0,!0))}))}var be=0;function ye(e,t,n,a){dt.sound.play("sfx連線",1),e=void 0===e?420:e,n=void 0===n?e:n,t=void 0===t?0:t,a=void 0===a||a;var i=W[be].id_獎線;a&&Be(k,W[be].cnt_獎額);var o=dt.add.graphics(0,0);o.alpha=0;for(var s=q[i],r=[],l=0;l<s.length;l++)r.push(V[s[l]]);for(var h in o.lifespan=777,o.lineStyle(7,16711680,.49),o.moveTo(r[0].x,r[0].y),r)o.lineTo(r[h].x,r[h].y),o.moveTo(r[h].x,r[h].y);for(var h in o.lineStyle(4.9,16711680,.49),r)o.beginFill(65535),o.drawCircle(r[h].x,r[h].y,10),o.endFill();var c=e,d=G/e,u=dt.time.events.loop(G,(function(){o.alpha+=o.alpha>=1?-d:d,(c-=G)<=0&&(o.destroy(),a?function(e,t){e.visible=!0,e.fontSize=12;var n=t[2],a=e.x,i=e.y,o=(36-e.fontSize)*G/n,s=(a-256)*G/n,r=(i-320)*G/n;e.x=256,e.y=320;var l=dt.time.events.loop(G,(function(){e.fontSize+=o,e.x+=s,e.y+=r,(n-=G)<=0&&(e.x=a,e.y=i,function(e,t){be<W.length?ye(t[0],t[1]):(be=0,de[0]=!0,e.visible=!1)}(k,t),dt.time.events.remove(l))}));xe(T,e.value,n)}(k,[e,t,n]):(de[0]=!0,be=0,Be(M,parseInt(Y[1][0]))),dt.time.events.remove(u))}));be++}var we=Object.freeze({前補零:0,千位點:1});function Se(e,t,n,a,i){var o=void 0===i?77:i,s=Math.floor(a/o),r=Math.floor((n-t)/s),l=dt.time.events.loop(o,(function(){Ee(e,r),0==--s&&(Be(e,n),ue(),dt.time.events.remove(l))}),this)}function xe(e,t,n,a){e.value;var i=void 0===a?77:a,o=Math.floor(n/i),s=Math.floor(t/o),r=dt.time.events.loop(i,(function(){Ee(e,s),0==--o&&dt.time.events.remove(r)}),this)}function Ee(e,t){e.value=Math.max(0,e.value+t),Me(e)}function Be(e,t){e.value=t,Me(e)}function Me(e){if(e.text=e.value,void 0!==e._格式)for(var t=0;t<e._格式.length;t++)switch(e._格式[t]){case we.前補零:e.text=n.Set_數字前置補零(e.value,e.digits);break;case we.千位點:e.text=n.Set_數字千位標點符號(e.text)}}function Oe(e,t){t=void 0===t||t,e.tint=t?16777215:7829367,e.inputEnabled=t}function Te(e){for(var t=0;t<F.length;t++)F[t].visible=!0;for(t=0;t<e;t++)F[t].visible=!1}function ke(e){Object.call(this),this.gameState=e,this.lastPos=0,this.Mask=dt.add.graphics(0,0),this.Mask.anchor.setTo(0,0),this.Mask.beginFill(16711680),this.Mask.drawRect(0,252,512,168),this.Mask.endFill(),this.Mask.alpha=.77;for(var t=0;t<5;t++){U.push(dt.add.group(dt.world,"Runner"+t));for(var n=0;n<4;n++){var a={x:65.52000000000001+95.24*t,y:224+R*n};n>0&&V.unshift(a);var i=new oe(this.gameState,a,"item",Math.floor(10*Math.random()));i.mask=this.Mask,U[t].add(i)}}}function Ie(e){var t;Object.call(this),this.gameState=e,Oe(j=dt.add.button(409.6,528,"BnOP",Ae,this),!1),j.getBounds().height,(S=dt.add.text(113.4,.95*R,s[0],{fill:"white",font:"bold 21pt Arial"})).anchor.setTo(.5,.5),S._格式=[we.前補零],S.digits=3,S.value=parseInt(s[0]),(A=dt.add.bitmapText(455.72,R,"Digit_GoldE","234,567,890",18)).anchor.setTo(1,.5),A._格式=[we.千位點],A.value=234567890,(P=dt.add.bitmapText(461.6,2.2*R,"Digit_GoldE","77,490,000",16)).anchor.setTo(1,.5),P._格式=[we.千位點],P.value=7749e4,(I=dt.add.bitmapText(197.4,2.3*R,"Digit_GoldE","4,567,890",14)).anchor.setTo(1,.5),I._格式=[we.千位點],I.value=4567890,xe(A,1e7,2e3),xe(P,1e6,2e3),xe(I,1e5,2e3),dt.time.events.loop(3e3,(function(){xe(A,1e7*(Math.round(10*Math.random())%2==0?-1:1),3e4),xe(P,1e6*(Math.round(10*Math.random())%2==0?-1:1),3e4),xe(I,1e5*(Math.round(10*Math.random())%2==0?-1:1),3e4)})),(T=dt.add.text(308.28,3.2*R,"0",{fill:"white",font:"bold 21pt Arial"})).anchor.setTo(1,.5),T.value=0,T.tint=7817545,(B=dt.add.text(430.08,3.55*R,"0",{fill:"white",font:"bold 21pt Arial"})).anchor.setTo(.5,.5),B.value=0,B.tint=13408563,console.log("小低低",s),(O=dt.add.text(325.92,8.9*R,s[4],{fill:"white",font:"bold 21pt Arial"})).anchor.setTo(1,.5),O.value=parseInt(s[4]),O.tint=7817545,(M=dt.add.text(325.92,6.9*R,s[6],{fill:"white",font:"bold 21pt Arial"})).anchor.setTo(1,.5),M.value=parseInt(s[6]),M.tint=7817545,(k=dt.add.bitmapText(T.x,224,"Digit_GoldD","0,000,000,000",42)).anchor.setTo(.5,.5),k.value=0,k.visible=!1,console.log("老低低",s),t=[1.8*84,344.4],this.BnBet={};for(var n=["num_自動轉數","num_注額"],a=0;a<n.length;a++){var i=n[a];this.BnBet[i]={},this.BnBet[i].減注=dt.add.button(t[a],646.4,"BnBet",this.On注,this,0,0,1),this.BnBet[i].減注.onInputDown.add(this.On注,this),this.BnBet[i].減注.onInputUp.add(this.On注,this),this.BnBet[i].減注.anchor.setTo(.5,1),this.BnBet[i].減注.iID=i,this.BnBet[i].減注.value=-1,C=this.BnBet[i].減注,this.BnBet[i].io=dt.add.text(t[a]-84,618.4,"0",{fill:"white",font:"bold 21pt Arial"}),this.BnBet[i].io.anchor.setTo(.5,1),this.BnBet[i].io.value=0,this.BnBet[i].io.tint=13408563,"num_自動轉數"===i?(this.BnBet[i].io._單位量=1,x=this.BnBet[i].io):"num_注額"===i&&(this.BnBet[i].io._單位量=5,E=this.BnBet[i].io),this.BnBet[i].加注=dt.add.button(t[a],this.BnBet[i].減注.y-1.2*this.BnBet[i].減注.getBounds().height,"BnBet",this.On注,this,0,0,1),this.BnBet[i].加注.onInputDown.add(this.On注,this),this.BnBet[i].加注.onInputUp.add(this.On注,this),this.BnBet[i].加注.anchor.setTo(.5,.5),this.BnBet[i].加注.angle=180,this.BnBet[i].加注.iID=i,this.BnBet[i].加注.value=1,D=this.BnBet[i].加注}}function Pe(e,t,n,a){a=void 0===a?65535:a,n=t.value*(void 0===n?e._單位量:n),Be(e,Math.abs(e.value+n+a)%a),dt.sound.play("sfx壓鈕",3),"num_注額"===t.iID?(Be(B,e.value),Oe(j,B.value>0)):t.iID}function Ae(){var e,t;e=O,t=-E.value,e.value=e.value+t<0?e.value:e.value+t,Me(e),"debug"===s[0]?w.Trig_Slot(Array.from(ne[y(0,ne.length)])):p(h.game_menu,d.Game,[u.u1,u.u2],[[X.押注開獎],[E.value]])}function De(e,t){t=t||!1}ke.prototype=Object.create(Object.prototype),ke.prototype.constructor=ke,Ie.prototype=Object.create(Object.prototype),Ie.prototype.constructor=Ie,Ie.prototype.On注=function(e,t,n){var a=e.iID;if(void 0===n){var i=0;e.e壓著=dt.time.events.loop(210,(function(){console.log(e.e壓著.elapsed);var t=this.BnBet[a].io._單位量*Math.pow(2,Math.floor(i/1e3));Pe(this.BnBet[a].io,e,t),i+=210}),this)}else n&&Pe(this.BnBet[a].io,e),dt.time.events.remove(e.e壓著)},Ie.prototype.On領獎=function(e,t,n){n&&(Oe(undefined,!1),Oe(D,!0),Oe(C,!0))},Ie.prototype.On自動跑燈=function(e,t,n){console.log("On自動跑燈"),n&&dt.time.events.loop(60*Phaser.Timer.SECOND,(function(){Re(dt.rnd.pick(PHASER_NUM))}),this)},Ie.prototype.On倍金押大=function(e,t,n){n&&console.log("On倍金押大")},Ie.prototype.On倍金押小=function(e,t,n){n&&console.log("On倍金押小")},Ie.prototype.Trig_Slot=function(e){if(0!==e.length&&j.inputEnabled)if(1!==j.frame){dt.sound.stopAll(),Y=e,j.frame=1,De(),L=[],z=null,J=null,H=null,W=[];for(var t=[],n=0;n<12;n++)t.push(n);var a=[];for(n=0;n<15;n++)a.push(n),L[n]=void 0;console.log("_回傳結果 ",Y);for(var i=Y[1][1],o=0,s=0;s<Y[0].length;s++)o+=Y[0][s]==$.連線獎?Y[s+2].length/2:1;var r=function(e,t,n){t=void 0===t?1:t;var a=y(0,e.length);if(1===t)return[a];var i=ie(e,a);if(2===t)return[a,i[y(0,i.length)]];for(var o=[],s=0;s<i.length;s++)o.push(e[i[s]]);for(s=0;s<i.length;s++){var r=ie(o,s);if(r.length>0)return[a,i[s],i[r[0]]]}}(q,o);for(console.log("_不干涉線>>>>> ",r),s=0;s<Y[0].length;s++){var l=Y[s+2];switch(console.log("回傳結果[0][b]>>>>> ",Y[0][s]),Y[0][s]){case $.收集獎:var h=l[0];for(J={id_獎線:r[s],id_獎圖:10,cnt_中獎圖:l[1],cnt_本機彩燈終亮結果:h,cnt_獎額:0===h?16800:0},t.splice(t.indexOf(10),1),n=0;n<J.cnt_中獎圖;n++){var c=q[J.id_獎線][n];L[c]=10,a.splice(a.indexOf(c),1)}break;case $.總賠率:var d=0,u=(p=l[0])-1;for(n=0;n<Q.length;n++)d+=E.value*Q[n][u];for(H={id_獎線:r[s],id_獎圖:9,cnt_中獎圖:p,cnt_獎額:d},t.splice(t.indexOf(9),1),n=0;n<p;n++)c=q[H.id_獎線][n],L[c]=9,a.splice(a.indexOf(c),1);break;case $.JP獎:d=0;var p=l[4];for(n=0;n<4;n++)d|=l[n]<<8*n;for(z={id_獎線:r[s],id_獎圖:11,cnt_中獎圖:l[4],cnt_獎額:d},t.splice(t.indexOf(11),1),n=0;n<z.cnt_中獎圖;n++)c=q[z.id_獎線][n],L[c]=11,a.splice(a.indexOf(c),1);break;case $.連線獎:for(n=0;n<l.length;n+=2){var g=l[n+0],f=(p=l[n+1],n/2);W[f]={id_獎線:r[f],id_獎圖:g,cnt_中獎圖:p,cnt_獎額:null!=Q[g]&&0!=E.value?E.value*Q[g][p-1]:i},t.splice(t.indexOf(W[f].id_獎圖),1);for(var m=0;m<W[f].cnt_中獎圖;m++)c=q[W[f].id_獎線][m],L[c]=W[f].id_獎圖,a.splice(a.indexOf(c),1)}break;case $.巨多線:for(n=0;n<6;n++)L[n]=8,a.splice(a.indexOf(n),1);for(n=0;n<l.length;n++)L[c=n+6]=l[n],a.splice(a.indexOf(c),1),t.splice(t.indexOf(l[n]),1);const e=3;for(n=0;n<q.length;n++){var v=L[q[n][2]];W[n]={id_獎線:n,id_獎圖:v,cnt_中獎圖:e,cnt_獎額:E.value*Q[v][e-1]}}}}var _=t.slice();for(n=0;n<a.length;n++){var b=a[n];if(b<3){for(var w=8;8===w;)w=t[y(0,t.length)];_.indexOf(w)>-1&&_.splice(_.indexOf(w),1),L[b]=w}else if(b<6)for(L[b]=8;8===L[b];)L[b]=_[y(0,_.length)];else L[b]=t[y(0,t.length)]}for(var S=0;S<5;S++){te[S]=[];for(var x=0;x<3;x++)te[S].push(L[3*S+x])}console.log(te),ee.ref=!1,Re()}else Oe(j,!1)};var Ce,je,Le=Object.freeze([0,250,500,750,1e3]),Ge=Object.freeze([0,11,21,36,21,7,0]),Ne=Object.freeze({起步延遲:0,第一段速:1,第二段速:2,第三段速:3,第四段速:4,第五段速:5,結束段速:6});function Re(){for(var e=0;e<U.length;e++){U[e].state=Ne.起步延遲;for(var t=0;t<U[e].length;t++)U[e].getAt(t).unLight()}re.stop(),le.play();var n=[0,0,0,0,0];Ce=dt.time.events.loop(G,(function(){for(var e=0;e<U.length;e++)if(U[e].state!==Ne.結束段速){U[e].y+=Ge[U[e].state];var t=Math.floor(U[e].y/R);n[e]<=Le[e]?U[e].state=Ne.起步延遲:U[e].state=t<1?Ne.第一段速:t<2?Ne.第二段速:t<66?Ne.第三段速:t<77?Ne.第四段速:t<82?Ne.第五段速:Ne.結束段速,Ue(e),n[e]+=G}}),this)}function Ue(e){var t=U[e],n=t.getTop();if(t.y+n.y>=448&&(n.y-=224,t.sendToBack(n),t.y>=4424&&(n.frame=te[e].shift(),t.y>=4592))){t.y=4592,t.state=Ne.結束段速;var a=t.y;t.y=0,n=t.getTop();for(var i=0;i<t.length;i++)t.getAt(i).y=t.getAt(i).y+a;t===U[U.length-1]&&(function(){if(0!==Y[0].length){var e=!1,t=0;ce=Y[0][t],pe();var n=dt.time.events.loop(490,(function(){for(var a,i,o=!0,s=0;s<de.length;s++)if(!1===de[s]){o=!1;break}o&&(console.log("is單項演繹結束!!!!!!!!!!!!!!!!!!!"),(t+=1)<Y[0].length?(ce=Y[0][t],pe()):e=!0),e&&(console.log("is所有演繹結束    is所有演繹結束 !!!!!!!!!!!!!!!!!!!"),a=777,i=dt.time.events.loop(G,(function(){T.tint=T.tint<11259391?T.tint+28:T.tint-28,(a-=G)<0&&(Se(T,parseInt(Y[1][1]),0,777),Se(M,0,parseInt(Y[1][0]),777),dt.time.events.remove(i))})),dt.time.events.remove(n))}))}else ue()}(),dt.time.events.remove(Ce))}}function Fe(t){switch(console.log(t,t.target),t.target.id){case"btn MenuMain Help":menu_in=menu[_.id],loadDoc(void 0,"",menu_in,[SetMenuIO,[menu[m.id],"777px","DownBack"]]);break;case"btn MenuMain Option":menu_in=menu[v.id],loadDoc(void 0,"",menu_in,[SetMenuIO,[menu[m.id],"777px","DownBack"]]);break;case"btn MenuGamePicking Play":var n=document.getElementById("scrl 篇集索引").id_選中鈕,a=document.getElementById("scrl 章回索引").id_選中鈕,i=je.content[n][a].key;switch(i){case"":alert("本章回"+e品項狀態[i]+"可選擇其他已經開放的。");break;case"0":Go_觀遊聆戲(n,a);break;case"1":if(confirm("本回內容需要收一張觀聆票卷\n確定支付？"))if(K.av_ticket){var o=new Date,s=(""+o.getFullYear()+(o.getMonth()+1)).substring(2);K.id_篇集=n,K.id_章回=a,p(h.game_menu,eCS.進入聆遊觀戲,[u.sr,u.sr],[e(s),e(je.content[n][a].date_time)])}else alert("目前您沒有觀聆票卷")}break;case"btn MenuGamePicking Back":default:break;case"pop_m機台有人":t.target.classList.toggle("show")}"scrl 話頁"===t.target.parentNode.id&&(qe.forEach((function(e,t,n){n[t].destroy(!0)})),qe=[],Cc讀字機._目前步=0,Cc讀字機._目前步已讀完td=0,t.target.parentNode.id_選中鈕=t.target.id,document.getElementById("sel 選頁").innerHTML="目前選擇第"+(parseInt(t.target.id)+1)+" 話頁：",Ze(parseInt(t.target.id)))}function Ye(){var e;(e=qe[Cc讀字機._目前步]).visible=!0,e.alpha=1,e.getAt(0).visible=!0,e.getAt(0).alpha=1,function(e){dt.add.tween(e).from({alpha:0},490,Phaser.Easing.Circular.InOut,!0).onComplete.add(ze,null,null,e)}(e=qe[Cc讀字機._目前步])}function ze(e,t){if(0===e.tn.length)He(e.td.length>0?e:void 0);else{var n=e.tn[0];for(dt.add.tween(n).to({alpha:1},490,Phaser.Easing.Circular.InOut,!0),dt.add.tween(n).from({x:n._動畫.fX,y:n._動畫.fY,width:0,height:0,angle:n.angle-90},490,Phaser.Easing.Circular.InOut,!0).onComplete.add((function(){He(e.td.length>0?e:void 0)}));1<e.tn.length;index++)n=e.tn[1],console.log("_目前step.tn.1",n),dt.add.tween(n).to({alpha:1},490,Phaser.Easing.Circular.InOut,!0),dt.add.tween(n).from({x:n._動畫.fX,y:n._動畫.fY,alpha:0,width:0,height:0,angle:n.angle-90},490,Phaser.Easing.Circular.InOut,!0)}}function He(e,t){if(void 0!==e){var n=0,a=e.td[n];a.visible=!0,a.alpha=1,console.log(a.name,"_目前td字句框._讀字機.",a),dt.add.tween(a).from({x:a._動畫.fX,y:a._動畫.fY,alpha:0,width:0,height:0},777,Phaser.Easing.Circular.InOut,!0).onComplete.add(Je,null,null,a);var i=dt.time.events.loop(280,(function(){1==a._讀字機.travels/a._讀字機._字句.length&&(Cc讀字機._目前步已讀完td>=e.td.length?(console.log("目前步已經讀完，換讀下步"),e.visible=!1,Cc讀字機._目前步++,Cc讀字機._目前步已讀完td=0,Cc讀字機._目前步>=qe.length?Cc讀字機._目前步=0:setTimeout(Ye,490),dt.time.events.remove(i)):(n+=1,(a=e.td[n]).visible=!0,a.alpha=1,dt.add.tween(a).from({x:a._動畫.fX,y:a._動畫.fY,alpha:0,width:0,height:0},777,Phaser.Easing.Circular.InOut,!0).onComplete.add(Je,null,null,a))),console.log(Cc讀字機._目前步已讀完td,"_目前td文具框讀字進度",e.td.length)}))}}function Je(e,t){void 0===e._話引箭號?e._讀字機._跑字句():dt.add.tween(e._話引箭號).to({alpha:1},490,Phaser.Easing.Power1,!0).onComplete.add(e._讀字機._跑字句,e._讀字機)}var We,Xe,Ve,Ke=[],qe=[];function $e(){We=dt.cache.getJSON("j_共用_話圖資源頁").textures,console.log("================ j_共用_話圖資源頁 =====================",We);for(var e=dt.cache.getJSON("j_共用_話圖資源頁").BMD,t=0;t<e.length;t++)tt(e[t])}function Ze(e){var t=new Phaser.Loader(dt);t.baseURL=b,console.log("f_載入關節jSon srcURLs.baseURL:",b),t.json("j_lp","assets/CcTextAssets/Level_Chapter/act0/page"+e+".json"),t.onLoadComplete.add(Qe,this,0,e),t.start()}function Qe(e){Xe=dt.cache.getJSON("j_lp"),We=Xe.textures.concat(dt.cache.getJSON("j_共用_話圖資源頁").textures),Ke=Xe.BMD,Ve=Xe.GB,Xe.steps;for(var t=0;t<Xe.textures.length;t++){var n=We[t];console.log("j_切圖塊資訊.image, j_切圖塊資訊.url",n.image,n.url),dt.load.image(n.image,n.url)}console.log("===========================================",We),dt.load.onLoadComplete.add(et),dt.load.start()}function et(){for(var e=0;e<Ke.length;e++)tt(Ke[e]);!function(){for(var e=Xe.steps,t=0;t<e.length;t++){var n=JSON.parse(JSON.stringify(e[t])),a=dt.add.group(dt.world,n.name);a.tn=[],a.td=[],a.ts=[];for(var i=0;i<n.parts.length;i++){var o=it(n.parts[i]);at(o,n.parts[i]),o.alpha=0,o.visible=!1,/^group_p\d+_step\d+_td\d+/.test(o.name)?(a.add(o),a.td.push(o),o.forEach((function(e){0==e.name.indexOf("group_話引箭號")&&(e.alpha=0,o._話引箭號=e),0==e.name.indexOf("mask_group_字塊")&&e.forEach((function(e){0==e.name.indexOf("group_字塊_")&&(o._讀字機=new Cc讀字機(e))}))}))):/^group_p\d+step\d+準切塊的點陣圖\d+/.test(o.name)?(a.addAt(o,0),o.alpha=1,o.visible=!0):/^group_p\d+_step\d+_tn\d+/.test(o.name)?(a.add(o),a.tn.push(o),o.alpha=0,o.visible=!0):(console.log("_步內物件:",o),a.add(o),a.ts.push(o),o.alpha=1,o.visible=!0)}a.json=n,qe.push(a),a.alpha=0,a.visible=!1}setTimeout(Ye,1e3)}()}function tt(e){for(var t=dt.make.bitmapData(Math.ceil(e.w),Math.ceil(e.h),e.name,!0),n=e.parts,a=(e.name.indexOf("準切塊"),0);a<n.length;a++){var i=n[a],o=rt(i.name),s=dt.cache.getBitmapData(i.name);if(null!=o){var r=lt(o,i,!0);t.copy(r,0,0,r.width,r.height,i.x,i.y,r.width,r.height,i.rot/180*-Math.PI,.5,.5)}else if(s)t.copy(s,0,0,s.width,s.height,i.x,i.y,s.width,s.height,i.rot/180*-Math.PI,.5,.5,i.sW,i.sH);else if("draw_circle"===i.name){var l=ot(i);t.copy(l.bitmap_data,0,0,l._直徑,l._直徑,i.x,i.y,l._直徑*i.sW,l._直徑*i.sH,i.rot/180*-Math.PI,.5,.5)}else"draw_rect"===i.name&&t.copy(st(i),0,0,i.w,i.h,i.x,i.y,i.w,i.h,i.rot/180*-Math.PI,.5,.5)}return t}function nt(e,t,n){return Math.max(16,e).toString(16)+Math.max(16,t).toString(16)+Math.max(16,n).toString(16)}function at(e,t){if(t.name,null!=e.length){var n=[];e.forEach((function(e){n.push(e)}),this),e.removeAll(),e.x=e.j_x-.5*t.w,e.y=e.j_y-.5*t.h;for(var a=0;a<n.length;a++){var i=n[a];e.add(i),i.x=i.j_x,i.y=i.j_y}}}function it(e,t){var n={},a=e.name,i=rt(a),o=dt.cache.getBitmapData(a);i?n=lt(i,e):o?(n=dt.add.image(e.x,e.y,o)).anchor.set(.5,.5):0==a.indexOf("draw_circle")?((n=dt.add.image(e.x,e.y,ot(e).bitmap_data)).anchor.set(.5,.5),n.angle=e.rot):0==a.indexOf("draw_rect")?((n=dt.add.image(e.x,e.y,st(e))).anchor.set(.5,.5),n.angle=e.rot):n=function(e,t){var n,a=e.name,i=Ve[a],o=dt.add.group(dt.world,a);if(0===a.indexOf("mask_group_")&&(o.j_w=i.w,o.j_h=i.h,n=function(e,t){var n=e.name,a=(Ve[n],dt.add.graphics(0,0,t));return a.beginFill(16717334),a.drawRect(.5*-e.w,.5*-e.h,e.w,e.h),a.endFill(),a}(e,o)),console.log("_造新件 _件名>>>>>>>>>>>>>",e),i.hasOwnProperty("parts"))for(var s=0;s<i.parts.length;s++){var r=i.parts[s],l=(r.name,it(r));ht(l,r),o.add(l),null!=n&&(l.centerX=l.centerX-.5*n.width,l.centerY=l.centerY-.5*n.height,l.mask=n,l.j_w=r.w,l.j_h=r.h)}return ht(o,e),o}(e),n.name=a,n.j_x=e.x,n.j_y=e.y;var s,r=Ve[a];for(s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);return/^group_p\d+_step\d+_tn\d+/.test(a)&&(console.log(a,"gb______________",n),console.log("j_GB[_件名]______________",Ve[a])),n}function ot(e,t){var n=Math.ceil(.5*e.w);e.sH>e.sW&&(n=Math.ceil(n*e.sH),e.sW=e.sW/e.sH,e.sH=1);var a=Math.ceil(2*n),i=dt.make.bitmapData(a,a);return i.circle(n,n,n,"#"+nt(e.R,e.G,e.B)),{_直徑:a,bitmap_data:i}}function st(e){var t=dt.make.bitmapData(e.w,e.h);return t.fill(Math.max(16,e.R),Math.max(16,e.G),Math.max(16,e.B)),t}function rt(e){for(var t=0;t<We.length;t++)for(var n=We[t].frames,a=0;a<n.length;a++){var i=n[a];if(e===i.filename)return{key_txr:We[t].image,_切圖塊:i}}return null}function lt(e,t,n){var a=e["_切圖塊"],i=90==a.angle,o=(t.rot,Math.PI,i&&Math.PI,i?a.frame.h:a.frame.w),s=i?a.frame.w:a.frame.h,r=(o=Math.ceil(Math.abs(o*t.sW)),s=Math.ceil(Math.abs(s*t.sH)),dt.make.bitmapData(o,s));r.copy(e.key_txr,a.frame.x,a.frame.y,a.frame.w,a.frame.h,.5*o,.5*s,a.frame.w,a.frame.h,i?.5*-Math.PI:0,.5,.5,t.sW,t.sH);var l=dt.make.image(0,0,r);return t.hasOwnProperty("R")&&(l.tint="0x"+nt(t.R,t.G,t.B)),l.anchor.setTo(.5),!0===n||(l.position.setTo(t.x,t.y),l.scale.setTo(t.sW,t.sH),l.angle=-t.rot),l}function ht(e,t){e.scale.setTo(t.sW,t.sH),e.centerX=t.x,e.centerY=t.y,e.angle=-t.rot}var ct=function(){Phaser.State.call(this)};(ct.prototype=Object.create(Phaser.State.prototype)).constructor=ct,ct.prototype.preload=function(){Ze(0),dt.load.bitmapFont("中獎標字","assets/font/BarFruit25中獎標字.png","assets/font/BarFruit25中獎標字.html"),dt.load.bitmapFont("DeskNum","assets/font/DeskNum.png","assets/font/DeskNum.html"),dt.load.bitmapFont("Digit_GoldA","assets/font/Digit_GoldA.png","assets/font/Digit_GoldA.html"),dt.load.bitmapFont("Digit_GoldB","assets/font/Digit_GoldB.png","assets/font/Digit_GoldB.html"),dt.load.bitmapFont("Digit_GoldC","assets/font/Digit_GoldC.png","assets/font/Digit_GoldC.html"),dt.load.bitmapFont("Digit_GoldD","assets/font/Digit_GoldD.png","assets/font/Digit_GoldD.html"),dt.load.bitmapFont("Digit_GoldE","assets/font/Digit_GoldE.png","assets/font/Digit_GoldE.html"),dt.load.image("bg","assets/bg.jpg"),dt.load.spritesheet("balls","assets/coin.png",32,32,6),dt.load.spritesheet("gems","assets/gems.png",32,32,8),dt.load.spritesheet("choices","assets/choices.png",84,R,12),dt.load.spritesheet("anm"+Z.bonus,"assets/anim_gem.png",64,48,8),dt.load.spritesheet("anm"+Z.收集獎,"assets/anim_light.png",64,64,7),dt.load.spritesheet("anm"+Z.Mega獎,"assets/deco1.png",70,70,3),dt.load.spritesheet("anm"+Z.JP獎,"assets/anim_JP.png",128,96,8),dt.load.spritesheet("deco1","assets/deco1.png",70,70,3),dt.load.spritesheet("deco2","assets/deco2.png",16,16,4),dt.load.spritesheet("deco3","assets/deco3.png",16,16,4),dt.load.spritesheet("BnOP","assets/bn_OP.png",86,86,2),dt.load.spritesheet("BnBet","assets/bn_bet.png",62,62,7),dt.load.audio("msc"+Z.win,"assets/mp3/MUSIC_Speed02.mp3"),dt.load.audio("msc"+Z.Mega獎,"assets/mp3/MUSIC_Speed01.mp3"),dt.load.audio("msc"+Z.收集獎,"assets/mp3/MUSIC_SortDu00.mp3"),dt.load.audio("msc"+Z.bonus,"assets/mp3/MUSIC_SortDu01.mp3"),dt.load.audio("msc"+Z.JP獎,"assets/mp3/MUSIC_Happy.mp3"),dt.load.audio("sfx壓鈕","assets/mp3/bet.mp3"),dt.load.audio("sfx金幣流","assets/mp3/sfx金幣流.mp3"),dt.load.audio("sfx連線","assets/mp3/sfx連線.mp3"),dt.load.audio("sound-bg-silent","assets/bg_silent.mp3"),dt.load.audio("sound-bg-play","assets/bg_play.mp3"),(re=dt.add.audio("sound-bg-silent")).loop=!0,re.play(),(le=dt.add.sound("sound-bg-play")).loop=!0},ct.prototype.create=function(){dt.add.image(0,0,"bg").anchor.setTo(0,0);for(var e=0;e<3;e++)F.push(dt.add.image(396+22*e,488,"BnBet",6)),F[e].anchor.setTo(.5,.5);Te("debug"===s[0]?y(0,3):parseInt(s[1])),this.groups=[];var t=dt.add.group(),n=dt.add.group();this.groups.blackMask=t,this.groups.item=n,new ke(this),w=new Ie(this);var a=dt.add.group();this.groups.deco=a;var i=[];for(i.push(new he(this,{x:0,y:0},"deco1","deco",{initSide:"left",frames:3})),i.push(new he(this,{x:0,y:0},"deco1","deco",{initSide:"right",frames:3})),i.push(new he(this,{x:0,y:0},"deco2","deco",{initSide:"up",frames:2})),i.push(new he(this,{x:0,y:0},"deco2","deco",{initSide:"down",frames:2})),i.push(new he(this,{x:0,y:0},"deco3","deco",{initSide:"left",frames:2})),i.push(new he(this,{x:0,y:0},"deco3","deco",{initSide:"down",frames:2})),e=0;e<i.length;e++)i[e].swim()};var dt=new Phaser.Game(512,640,Phaser.CANVAS,"barfruit25",{preload:function(){dt.raf.forceSetTimeOut=!0,dt.state.add("StartState",new ct),document.body.addEventListener("click",Fe),dt.stage.backgroundColor="#4488AA",console.log("歡迎進入",document.baseURI," 拉爸水果25線"),dt.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,dt.scale.pageAlignHorizontally=!0,dt.scale.pageAlignVertically=!0,dt.stage.disableVisibilityChange=!0,dt.load.baseURL=b,dt.load.json("j_共用_話圖資源頁","../Game_Comics/Assets/CcTextAssets/_共用_話圖資源頁.json")},create:function(){var e=new Phaser.Loader(dt);e.baseURL=b;for(var t=dt.cache.getJSON("j_共用_話圖資源頁").textures,n=0;n<t.length;n++){var a=t[n];e.image(a.image,a.url)}e.onLoadComplete.add($e),e.start()}});s[7],document.init=function(){console.log("歡迎進入",document.baseURI," 經典25線水果盤！！！")},"debug"!=s[0]&&function(n){try{var a=new Array("正在連線","已建立連線","正在關閉連線","已關閉連線");console.log("ws.connect 場次內容：",K.gWS),(o=new WebSocket(K.gWS)).binaryType="arraybuffer",document.getElementById("message"),console.log("Socket狀態：",a[o.readyState]),o.onopen=function(){o.send("Ready To 7Ws Entertenment !!!!"),function(){console.log("cfg Rules _票auth_code：",s[3]);var t=parseInt(s[3],10);票碼=NaN===t?new Uint8Array([231,71,68,66]):new Uint8Array([255&t,t>>8&255,t>>16&255,t>>24&255]),p(h.authorize,c.授權AppGame,[u.u4,u.sr],[[255&t,t>>8&255,t>>16&255,t>>24&255],e(s[2])])}()},o.onerror=function(e){alert("目前網路忙線，與伺服器連線已經中斷\n請稍後再試。 \n error:"+e.code),console.log("Socket狀態：",e.code,"onerror:",e)},o.onmessage=function(e){var n=new Uint8Array(e.data);console.log("Server的原生回傳(Raw FDBK) : ",n," 資料{Array}長度：",n.length),ae[n[0]][n[1]](function(e){for(var n=[],a=2;a<e.length;){var i=e[a],o=e[a+1],s=0,r=a+2;if(!i)return alert(a+"< 料- 長度 >:"+i),void console.log(a,"< 料- 長度 >:"+e[a],"  < 類型 >:"+o);switch(o){case u.bl:case u.c1:break;case u.sa:for(var l,h=[],c=2,d=0;d<i;d++)l=e[g=a+c],h.push(t(e.slice(g+1,g+l))),c+=l;i=c,n.push(h),s++;break;case u.sr:n.push(t(e.slice(r,r+i))),i+=2;break;case u.s1:var p=t(e.slice(r,r+i)).split(",");n.push(p),i+=2;break;case u.s2:case u.s3:case u.sm:break;case u.bt:for(h=[],c=2,d=0;d<i;d++){for(var g=a+c,f=0;f<8;f++)h.push(1&e[g]>>f);c+=1}i=c,n.push(h),s++;break;case u.i1:for(h=new Int8Array(i),c=2,d=0;d<i;d++)g=a+c,h[d]=e[g],c+=Int8Array.BYTES_PER_ELEMENT;i=c,n.push(h);break;case u.u1:for(h=new Uint8Array(i),c=2,d=0;d<i;d++)g=a+c,h[d]=e[g],c+=Uint8Array.BYTES_PER_ELEMENT;i=c,n.push(h);break;case u.i2:for(h=[],c=2,d=0;d<i;d++){g=a+c;var m=0;for(f=0;f<Int16Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),c+=Int16Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.u2:for(h=[],c=2,d=0;d<i;d++){for(g=a+c,m=0,f=0;f<Uint16Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),c+=Uint16Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.i4:for(h=[],c=2,d=0;d<i;d++){for(g=a+c,m=0,f=0;f<Int32Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),c+=Int32Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.u4:for(h=[],c=2,d=0;d<i;d++){for(g=a+c,m=0,f=0;f<Uint32Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),c+=Uint32Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.i8:case u.u8:case u.db:case u.fl:case u.de:case u.i1n:case u.u1n:case u.i2n:case u.u2n:case u.i4n:case u.u4n:case u.i8n:case u.u8n:case u.dbn:case u.fln:case u.den:case u.u1c:break;case u.pu:for(h=[],c=2,d=0;d<i;d++){for(g=a+c,m=0,f=0;f<Uint32Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),localStorage.setItem(K.gID+"_pu"+o.toString()+s,m),console.log("pu:::>",m),s++,c+=Uint32Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.pi:for(h=[],c=2,d=0;d<i;d++){for(g=a+c,m=0,f=0;f<Int32Array.BYTES_PER_ELEMENT;f++)m|=e[g+f]<<8*f;h.push(m),localStorage.setItem(K.gID+"_pi"+o.toString()+s,m),console.log("pi:::>",m),s++,c+=Int32Array.BYTES_PER_ELEMENT}i=c,n.push(h);break;case u.ps:console.log("pos_本type料頭:::>",e.length,r,i),m=t(e.subarray(r,r+i)),n.push(m),localStorage.setItem(K.gID+"_ps",m),i+=2;case u.pf:case u.count:}a+=i}return console.log("Server回傳(FDBK)的萃取：",n),n}(n))},o.onclose=function(){console.log("網路狀態：",a[o.readyState])}}catch(e){alert("網路連線狀態發生錯誤\n"+e)}}()})();